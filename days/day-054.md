# Kubernetes Shared Volumes

We are working on an application that will be deployed on multiple containers within a pod on Kubernetes cluster. There is a requirement to share a volume among the containers to save some temporary data.

In this task, we created a Pod named `volume-share-nautilus` with two containers using a shared `emptyDir` volume.

* Pod name: `volume-share-nautilus`
* Image used: `debian:latest`
* Shared volume: `volume-share`
* Volume type: `emptyDir`
* Mount paths:

  * `/tmp/news`
  * `/tmp/demo`

---

## Steps

1. Create the `volume-share-nautilus.yml` file with the required Pod configuration.

2. Create the Pod:

```sh
kubectl apply -f volume-share-nautilus.yml
```

3. Execute the first container:

```sh
kubectl exec -it volume-share-nautilus -c volume-container-nautilus-1 -- /bin/bash
```

> Create `news.txt` file inside the shared directory

```sh
echo "Shared volume test file" > /tmp/news/news.txt
```
[![First Container Verification](../screenshots/Screenshot-day-54-verify-volume-first-container.png)](../Screenshot-day-54-verify-volume-first-container.png)

4. Execute the second container:

```sh
kubectl exec -it volume-share-nautilus -c volume-container-nautilus-2 -- /bin/bash
```

> Verify the file exists inside the shared directory

```sh
ls /tmp/demo
```

[![Second Container Verification](../screenshots/Screenshot-day-54-second-container-verification.png)](../Screenshot-day-54-second-container-verification.png)


```sh
cat /tmp/demo/news.txt
```

---

## Good to Know?

### Shared Volumes

* **emptyDir**: Temporary storage shared between containers in the same Pod
* **Pod Lifetime**: Volume exists as long as the Pod is running
* **Ephemeral Storage**: Data is deleted when the Pod is removed
* **Data Sharing**: Enables communication between containers via filesystem

---

### Volume Types

* **emptyDir**: Deleted when Pod is removed
* **hostPath**: Mounts a directory from the node
* **persistentVolumeClaim**: Used for persistent storage
* **configMap / secret**: Used for configuration and sensitive data

---

### Multi-Container Use Cases

* **Sidecar Pattern**: Logging or monitoring containers
* **Producer / Consumer Pattern**: One container writes, another reads
* **Temporary Processing**: Shared workspace between containers
* **Shared Configuration Files**

