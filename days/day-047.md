# Docker Python App

## Overview

In this task, a Python application is containerized using Docker and deployed on **App Server 3**.
The application dependencies are already available in the following path:

```
/python_app/src/requirements.txt
```

The goal is to create a Docker image, run a container with proper port mapping, and verify that the application is accessible from the host.

---

## Requirements

* Docker installed and running on App Server 3
* Python application files located under `/python_app/src`
* `server.py` listening on port **6300**

---

## Implementation Steps

### 1. Access App Server and Navigate to Project Directory

```sh
sudo -i
cd /python_app
```

---

### 2. Create the Dockerfile

Create a Dockerfile inside `/python_app`:

```sh
vi Dockerfile
```

Add the following content:

```Dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY src/ /app/

RUN pip install --no-cache-dir -r requirements.txt

EXPOSE 6300

CMD ["python", "server.py"]
```

---

### 3. Build the Docker Image

```sh
docker build -t nautilus/python-app .
```

Verify the image:

```sh
docker images | grep nautilus/python-app
```

---

### 4. Run the Container

```sh
docker run -d \
  --name pythonapp_nautilus \
  -p 8096:6300 \
  nautilus/python-app
```

Verify container status:

```sh
docker ps | grep pythonapp_nautilus
```

---

### 5. Test the Application

```sh
curl http://localhost:8096
```

[![Test the Application](../screenshots/Screenshot-day-47-verify-container.png)](../screenshots/Screenshot-day-47-verify-container.png)

---

## Good to Know

### Networking Behavior

* Docker containers run in an isolated network namespace.
* Applications must bind to `0.0.0.0`, not `127.0.0.1`, to be reachable from the host.
* Port mapping follows the format: `HOST_PORT:CONTAINER_PORT`.

---

### Image Build Considerations

* Docker caches layers; modifying `requirements.txt` invalidates dependency layers.
* Using `--no-cache-dir` reduces final image size.
* Avoid copying unnecessary files (use `.dockerignore`).

---

### Runtime Debugging

* View application logs:

  ```sh
  docker logs pythonapp_nautilus
  ```
* Enter the running container:

  ```sh
  docker exec -it pythonapp_nautilus /bin/bash
  ```
* Test inside container:

  ```sh
  curl http://localhost:6300
  ```

---

### Operational Tips

* Always remove old containers before redeploying:

  ```sh
  docker rm -f pythonapp_nautilus
  ```
* Tag images properly for versioning (e.g., `nautilus/python-app:v1`).
* Containers should be stateless; persist data externally if needed.