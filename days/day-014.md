#  Apache Service Troubleshooting â€“ Stratos DC

## ğŸ“Œ Task Overview

The production support team of **xFusionCorp Industries** deployed monitoring tools to track the health of services across the **Stratos Datacenter**.
One of the monitoring systems reported that the **Apache (httpd) service was unavailable** on one of the application servers.

### ğŸ¯ Objective

* Identify the faulty application server
* Fix the issue preventing Apache from starting
* Ensure **Apache is running on port `8084`** on **all app servers**
* No application code is required; only service availability matters

---

## ğŸ› ï¸ Steps to Fix the Issue

### 1ï¸âƒ£ Login to the App Server

```bash
ssh tony@stapp01
```

---

### 2ï¸âƒ£ Check Apache Service Status

```bash
sudo systemctl status httpd
```

Observed output:

```text
Active: failed (Result: exit-code)
(98) Address already in use
no listening sockets available
AH00015: Unable to open logs
```

ğŸ“¸ *Screenshot: Apache service failure message*

---

### 3ï¸âƒ£ Identify the Root Cause

The error indicates a **port conflict**.
Apache cannot start because the configured port is already in use.

Check which service is using port `8084`:

```bash
sudo ss -lntp | grep 8084
```

Output showed:

```text
LISTEN 127.0.0.1:8084 users:(("sendmail",pid=700))
```

ğŸ“Œ **Root cause:**
`sendmail` service was already listening on port `8084`, preventing Apache from binding to the port.

ğŸ“¸ *Screenshot: Port 8084 used by sendmail*

---

### 4ï¸âƒ£ Stop and Disable the Conflicting Service

Since mail service is **not required** for this task, it was safely stopped.

```bash
sudo systemctl stop sendmail
sudo systemctl disable sendmail
```

---

### 5ï¸âƒ£ Verify Apache Configuration

Ensure Apache is configured to listen on the correct port.

Edit the Apache configuration file:

```bash
sudo vi /etc/httpd/conf/httpd.conf
```

Confirmed configuration:

```apache
#Listen 12.34.56.78:80
Listen 8084
```

ğŸ“¸ *Screenshot: Apache listening on port 8084*

---

### 6ï¸âƒ£ Start and Enable Apache Service

```bash
sudo systemctl start httpd
sudo systemctl enable httpd
```

Verify status:

```bash
sudo systemctl status httpd
```

Expected result:

```text
Active: active (running)
```

ğŸ“¸ *Screenshot: Apache running successfully*

---

### 7ï¸âƒ£ Confirm Apache is Listening on Port 8084

```bash
sudo ss -lntp | grep 8084
```

Expected output:

```text
LISTEN ... users:(("httpd",pid=XXXX))
```

---

### 8ï¸âƒ£ Repeat on All App Servers

Apply the **same steps** on:

* `stapp02`
* `stapp03`

Ensure:

* Apache is **running**
* Apache is **enabled**
* Apache listens on **port 8084**

---

## ğŸ“˜ Good to Know

### ğŸ”¹ Apache (httpd)

Apache is a widely used open-source web server that listens on a specific port to handle HTTP requests.
Only **one service can bind to a port at a time**, so port conflicts are a common cause of startup failures.

---

### ğŸ”¹ Common Service Troubleshooting Commands

* Service status:

  ```bash
  systemctl status service-name
  ```

* Start / Stop service:

  ```bash
  systemctl start service-name
  systemctl stop service-name
  ```

* Enable service at boot:

  ```bash
  systemctl enable service-name
  ```

---

### ğŸ”¹ Port & Process Troubleshooting

* Check open ports:

  ```bash
  ss -lntp
  netstat -tulnp
  ```

* Find process using a port:

  ```bash
  lsof -i :PORT
  ```

* Stop conflicting service:

  ```bash
  systemctl stop service-name
  ```

---

### ğŸ”¹ Common Causes of Apache Failure

* Port conflicts (another service using the same port)
* Incorrect `Listen` configuration
* Permission issues
* Misconfigured or unavailable log directories

---

## âœ… Final Status

âœ” Faulty app server identified
âœ” Port conflict resolved
âœ” Apache running on port `8084`
âœ” Apache enabled on all app servers
âœ” Monitoring alert cleared

---

ğŸ’¡ *This issue represents a real-world production incident involving port conflicts and service dependency management â€” a core skill in DevOps and Linux system administration.*
