# Install and Configure Apache Static Websites

xFusionCorp Industries is preparing its infrastructure in the **Stratos Datacenter** to host two static websites. Although development is still in progress, the servers must be configured in advance to serve the content correctly.

This guide documents the steps followed to install and configure **Apache HTTP Server** to host two static websites on a custom port.

---

## Task Requirements

* Install the `httpd` package and dependencies on an application server
* Configure Apache to listen on port `3000`
* Deploy two static website backups:

  * `media`
  * `apps`
* Configure Apache so the websites are accessible at:

  * `http://localhost:3000/media/`
  * `http://localhost:3000/apps/`
* Verify access using the `curl` command

---

## Steps

### 1. Install Apache HTTP Server

```sh
sudo yum install -y httpd
```


### 2. Configure Apache to Listen on Port 3000

Edit the Apache configuration file:

```sh
sudo nano /etc/httpd/conf/httpd.conf
```

Update or add the following line:

```apache
Listen 3000
```


### 3. Enable and Start Apache Service

```sh
sudo systemctl enable httpd
sudo systemctl start httpd
```

Verify status:

```sh
sudo systemctl status httpd
```


### 4. Copy Website Backups from Jump Host

From the jump host, copy the website backups to the application server user’s home directory:

```sh
scp -r /home/thor/media user@app_server:/home/user/
scp -r /home/thor/apps user@app_server:/home/user/
```

---

### 5. Deploy Websites to Apache Document Root

Move the websites into Apache’s default document root:

```sh
sudo cp -r ~/media /var/www/html/
sudo cp -r ~/apps /var/www/html/
```


### 6. Restart Apache

```sh
sudo systemctl restart httpd
```

---

### 7. Verify Website Access

Use `curl` on the application server:

```sh
curl http://localhost:3000/media/
curl http://localhost:3000/apps/
```

Expected output example:

```html
<!DOCTYPE html>
<html>
<body>

<h1>KodeKloud</h1>

<p>This is a sample page for our media website</p>

</body>
</html>
```

---

## Good to Know

### Apache Hosting Methods

* **Port-based hosting**: Serve applications on different ports
* **Directory-based hosting**: Serve multiple sites from subdirectories
* **Alias directive**: Map URLs to filesystem locations


### Apache Directory Structure

* **Default Document Root**: `/var/www/html/`
* **Index Files**: `index.html` is served automatically
* **Permissions**:

  * Directories: `755`
  * Files: `644`
  * Ownership: readable by Apache user


### Useful Apache Commands

```sh
sudo systemctl start httpd
sudo systemctl stop httpd
sudo systemctl restart httpd
sudo systemctl status httpd
```


### Common Troubleshooting Tips

* Ensure Apache is listening on the correct port
* Restart Apache after every configuration change
* Verify directory permissions
* Check logs:

  * `/var/log/httpd/access_log`
  * `/var/log/httpd/error_log`
