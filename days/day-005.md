# Day 5 ‚Äì Install and Disable SELinux (App Server 3)

## Goal
Following a security audit, the xFusionCorp Industries security team decided to introduce **SELinux** to enhance server and application security.  
For initial testing on **App Server 3 in the Stratos Datacenter**, SELinux must be **installed but permanently disabled**.  
SELinux will be re-enabled later after required configuration changes.

> ‚ö†Ô∏è The current SELinux status from the command line should be ignored.  
> The **final state after the next reboot must be `disabled`**.

---

## Requirements
- Install the required SELinux packages
- Permanently disable SELinux
- Do **not** reboot the server (maintenance reboot already scheduled)
- Ensure SELinux remains disabled after reboot

---

## Steps

### 1. Install SELinux Packages
Install all required SELinux-related packages using `dnf` or `yum`:

```bash
sudo dnf install -y \
  selinux-policy \
  selinux-policy-targeted \
  policycoreutils \
  policycoreutils-python-utils
```

These packages provide:
- SELinux policies
- Management utilities
- Policy tools for future configuration

### 2. Edit SELinux Configuration File
Open the SELinux configuration file:

```bash
sudo nano /etc/selinux/config
```

Locate the following line and set it exactly as shown:

```ini
SELINUX=disabled
```

‚ö†Ô∏è Make sure:
- There are no typos (use `disabled`, not `disabed`)
- The line is not commented (no leading `#`)

Save and exit the file.

### 3. Verify Configuration
Check that the configuration file was updated correctly:

```bash
grep SELINUX= /etc/selinux/config
```

Expected output:

```text
SELINUX=disabled
```

Even if `sestatus` or `getenforce` still shows another mode now, it does not matter. The system will apply this configuration after the scheduled reboot.

---

## Good to Know üß†

What is SELinux?  
SELinux (Security-Enhanced Linux) is a Mandatory Access Control (MAC) security system built into Linux. It restricts what processes can do, even if they run as root.

SELinux Modes

| Mode      | Description                                         |
|-----------|-----------------------------------------------------|
| Enforcing | Policies are enforced and violations are blocked    |
| Permissive| Policies are not enforced; violations are logged    |
| Disabled  | SELinux is completely turned off                    |

SELinux Policies

| Policy    | Description                                            |
|-----------|--------------------------------------------------------|
| Targeted  | Protects selected services (recommended, default)      |
| Strict    | All processes are confined                             |
| MLS       | Multi-Level Security (used in military/government)     |

Why Disable SELinux Temporarily?
- Prevents application breakage during setup
- Allows teams to:
  - Identify required permissions
  - Tune policies safely
  - Avoid unexpected access denials

SELinux will be re-enabled later with proper rules.

Important Files & Locations

| File/Directory                    | Purpose                         |
|-----------------------------------|---------------------------------|
| /etc/selinux/config               | Main SELinux configuration      |
| /var/log/audit/audit.log          | SELinux violation logs          |
| /etc/selinux/targeted/            | Targeted policy files           |

Useful SELinux Commands

```bash
getenforce                            # Show current SELinux mode
sestatus                              # Detailed SELinux status
setenforce 0                          # Temporarily set permissive mode
setenforce 1                          # Enable enforcing mode
sealert -a /var/log/audit/audit.log   # Analyze denials
```